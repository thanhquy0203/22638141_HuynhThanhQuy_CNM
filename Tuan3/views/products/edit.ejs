<%- include("../layouts/header", { title: "Edit Product" }) %>

<div class="card shadow-sm">
  <div class="card-body p-4">
    <h4 class="mb-3">Edit Product</h4>

    <form method="post" action="/products/<%= product.id %>/edit" enctype="multipart/form-data">

      <div class="mb-3">
        <label class="form-label">Name</label>
        <input class="form-control" name="name" value="<%= product.name %>" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Price</label>
        <input class="form-control" name="price" type="number"
               value="<%= product.price %>" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Quantity</label>
        <input class="form-control" name="quantity" type="number"
               value="<%= product.quantity %>" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Category</label>
        <select class="form-select" name="categoryId">
          <option value="">-- None --</option>
          <% categories.forEach(c => { %>
            <option value="<%= c.categoryId %>"
              <%= product.categoryId === c.categoryId ? "selected" : "" %>>
              <%= c.name %>
            </option>
          <% }) %>
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Current Image</label><br>
        <% if (product.url_image) { %>
          <img src="<%= product.url_image %>"
               style="max-width:200px;border-radius:8px">
        <% } else { %>
          <span class="text-muted">No image</span>
        <% } %>
      </div>

      <div class="mb-3">
        <label class="form-label">New Image (optional)</label>
        <input class="form-control" type="file" name="image" accept="image/*">
      </div>

      <button class="btn btn-primary">Update</button>
      <a href="/products" class="btn btn-light">Cancel</a>
    </form>
  </div>
</div>

<%- include("../layouts/footer") %>
